# 実装完了機能 使い方ガイド

## 📋 実装済み機能一覧

### ✅ 基本機能
1. **タスク管理の高度化** - タグ、依存関係、添付ファイル、テンプレート
2. **お知らせ機能の高度化** - コメント、メンション
3. **スケジュール管理の高度化** - 参加者管理、コメント、添付ファイル
4. **ファイル共有の高度化** - バージョン管理、タグ、コメント、共有リンク
5. **統合検索機能** - 全機能を横断検索
6. **プロジェクト管理機能** - プロジェクト作成・管理
7. **チャット機能** - リアルタイムチャット、メンション
8. **ワークフロー/承認機能** - 承認申請とワークフロー管理
9. **監査ログ機能** - 操作履歴の確認・エクスポート（管理者のみ）
10. **権限管理機能** - 細かい権限制御（管理者のみ）
11. **PWA対応** - オフライン対応、ホーム画面追加

## 🔧 セットアップ手順

### 1. Supabaseでスキーマを実行

#### フェーズ1のスキーマ（必須）
SupabaseのSQL Editorで以下を実行してください：

```sql
-- 1. まず、フェーズ1のスキーマを実行
-- supabase-schema-complete-phase1.sql の内容をコピー＆ペースト
```

または、SupabaseのSQL Editorで `supabase-schema-complete-phase1.sql` の内容を実行

#### 権限管理のスキーマ（オプション）
権限管理機能を使う場合：

```sql
-- supabase-schema-permissions.sql の内容を実行
```

### 2. 開発サーバーを起動

```bash
cd /Users/shugo/Desktop/office-app
npm run dev
```

ブラウザで `http://localhost:3000` にアクセス

### 3. 各機能の使い方

#### タスク管理の高度化
1. 「タスク管理」ページにアクセス
2. 「タグ管理」ボタンでタグを作成
3. タスクをクリックして「コメントを見る」をクリック
4. 展開されたセクションで：
   - **タグ**: タグを追加・削除
   - **依存関係**: 依存タスクを追加
   - **添付ファイル**: ファイルをアップロード（最大50MB）
   - **コメント**: コメントを追加

#### 統合検索
1. サイドバーの「検索」をクリック
2. キーワードを入力して検索
3. メンバー、タスク、お知らせ、イベント、ファイルを横断検索

#### プロジェクト管理
1. サイドバーの「プロジェクト」をクリック
2. 「+ 新規プロジェクト」からプロジェクトを作成
3. メンバーを追加（リーダー・メンバー・オブザーバー）
4. タスクをプロジェクトに紐付け

#### チャット
1. サイドバーの「チャット」をクリック
2. 「+ 新規」からチャットルームを作成
3. メッセージを送信
4. `@username` でメンション

#### 承認ワークフロー
1. サイドバーの「承認」をクリック
2. 「+ 新規ワークフロー」でワークフローを作成
3. 「+ 新規申請」で承認申請を作成
4. 承認・却下・差し戻しを実行

#### 監査ログ（管理者のみ）
1. サイドバーの「監査ログ」をクリック（管理者のみ表示）
2. 操作履歴を確認
3. CSV/JSONエクスポート

#### 権限管理（管理者のみ）
1. サイドバーの「権限管理」をクリック（管理者のみ表示）
2. 各機能の権限を設定
3. ロール・部署・ユーザー単位で権限を割り当て

## 🚨 トラブルシューティング

### エラーが発生する場合

1. **ブラウザのコンソール（F12）を確認**
   - エラーメッセージを確認
   - エラー内容をメモ

2. **Supabaseのログを確認**
   - Supabase Dashboard → Logs
   - エラーがあれば確認

3. **データベーススキーマを確認**
   - 必要なテーブルが作成されているか確認
   - Supabase Dashboard → Table Editor

### 機能が動作しない場合

1. **データベーススキーマが実行済みか確認**
   - `supabase-schema-complete-phase1.sql` を実行済みか確認

2. **環境変数が設定されているか確認**
   - `.env.local` に `NEXT_PUBLIC_SUPABASE_URL` と `NEXT_PUBLIC_SUPABASE_ANON_KEY` が設定されているか

3. **開発サーバーが起動しているか確認**
   - ターミナルで `npm run dev` が実行されているか

## 📝 次のステップ

### まだ実装されていない機能（必要に応じて）

1. **二段階認証/パスワードポリシー強化**
2. **Googleカレンダー同期**
3. **Webhook/REST API**
4. **バックアップ/リストア機能**
5. **課金/サブスク機能**

### カスタマイズ

- UIデザインの調整
- 機能の追加・削除
- 権限設定の調整
- データエクスポート形式の変更

## 💡 ヒント

- 各機能は独立して動作するため、必要な機能だけを使うことができます
- 権限管理を使えば、細かくアクセス制御が可能です
- 監査ログで誰が何をしたかを追跡できます
- PWA対応により、スマホでもアプリのように使用できます

